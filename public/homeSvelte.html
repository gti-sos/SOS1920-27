<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>

	<title>SOS1920-27</title>

	<link rel='icon' type='image/png' href='/favicon.png'>
	<link rel='stylesheet' href='/global.css'>
	<link rel='stylesheet' href='/build/bundle.css'>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	  <!-- Template Main CSS File -->
	  <link href="assets/css/style.css" rel="stylesheet">
			<link href="assets/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">


	<script defer src='/build/bundle.js'></script>
	<!--//cabeceras belen-->
    <script src="https://code.highcharts.com/highcharts.js" defer></script>
    <script src="https://code.highcharts.com/highcharts-more.js" defer></script>
    <script src="https://code.highcharts.com/modules/exporting.js" defer></script>
	<script src="https://code.highcharts.com/modules/accessibility.js"  defer></script>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
		  <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>

	<!-- youtube -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
	<!-- <script src="script.js"></script> -->
	<script async defer src="https://apis.google.com/js/api.js"
    onload="this.onload=function(){};handleClientLoad()"
    onreadystatechange="if (this.readyState === 'complete') this.onload()"></script>
    
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header-inner-pages">

    <div class="container">

      <div class="logo float-left">
        <!-- Uncomment below if you prefer to use an image logo -->
        <h1 class="text-light"><a href="index.html" class="scrollto"><span>SOS1920-27</span></a></h1>
        <!-- <a href="index.html" class="scrollto"><img src="assets/img/logo.png" alt="" class="img-fluid"></a> -->
      </div>

      <nav class="main-nav float-right d-none d-lg-block">
        <ul>
          <li><a href="./index.html">Inicio</a></li>
		  <li class="drop-down"><a href="./homeSvelte.html#/gui1spc">Tasas de Suicidios</a>
			<ul>
				<li><a href="./homeSvelte.html#/gui1spc">Tabla</a></li>
				<li><a href="./homeSvelte.html#/gui1SPCHighChart">Gráfica Highchart</a></li>
				<li><a href="./homeSvelte.html#/gui1SPCChartist">Gráfica Chartist</a></li>			  </ul></li>
		  <li class="drop-down"><a href="./homeSvelte.html#/gui3lq">Calidad de Vida</a>
			<ul>
				<li><a href="./homeSvelte.html#/gui3lq">Tabla</a></li>
				<li><a href="./homeSvelte.html#/gui3LQHighChart">Gráfica Highchart</a></li>
				<li><a href="./homeSvelte.html#/gui3LQApexChart">Gráfica Apexcharts</a></li>
			  </ul></li>
          <li class="drop-down"><a href="./homeSvelte.html#/gui2poverty">Pobreza</a><ul>
			<li><a href="./homeSvelte.html#/gui2poverty">Tabla</a></li>
			<li><a href="./homeSvelte.html#/gui2povertyHighChart">Gráfica Highchart</a></li>
			<li><a href="./homeSvelte.html#/gui2povertyChartJS">Gráfica ChartJS</a></li>
		  </ul>
		</li>
		<li class="drop-down"><a href="./index.html">Conjunto</a>
			<ul>
				<li class="drop-down"><a href="./index.html">Integraciones</a><ul>
					<li><a href="./homeSvelte.html#/integrations/gui1integrations">Belén</a></li>
					<li><a href="./homeSvelte.html#/integrations/gui2integrations">José Manuel</a></li>
					<li><a href="./homeSvelte.html#/integrations/gui3integrations">Juan Luis</a></li>
				  </ul></li>
				<li><a href="./homeSvelte.html#/analytics">Gráfica</a></li>
				<li><a href="./homeSvelte.html#/about">About</a></li>
			  </ul>
		</li>
        </ul>
      </nav><!-- .main-nav -->

	</div>
	
	
  </header><!-- #header -->
<br>
	<!-- ======= Services Section ======= -->
	<section id="services" class="services section-bg" style="min-height: 100%;">
	
	<div class="container">
		  
		  <div id="SvelteApp"></div>
	 			 
	</div>
	</section><!-- End Services Section -->
</body>

</html>

<script>
	const CLIENT_ID = '663078597971-odm825f626v63o0rdl9e6s0ic3do5sht.apps.googleusercontent.com';
	const DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest"];
	const SCOPES = 'https://www.googleapis.com/auth/youtube.readonly';

	const authorizeButton = document.getElementById('enter-button');
	const signoutButton = document.getElementById('exit-button');
	const content = document.getElementById('content');

	// default youtube channel
	const defaultChannel = 'SISTEMAS ORIENTADOS A SERVICIOS';

	// Load auth2 library
	function handleClientLoad(){
		gapi.load('client:auth2', initClient);
	}

	// Init API client library and set up sing in listeners
	function initClient(){
		gapi.client.init({
			discoveryDocs: DISCOVERY_DOCS,
			clientId: CLIENT_ID,
			scope: SCOPES
		}).then(() => {
			// Listen for sing state changes
			gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
			// Handle initial sign in state
			updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
			authorizeButton.onclick = handleAuthClick;
			signoutButton.onclick = handleSignouClick;
		});
	}

	// update UI sign in state changes
	function updateSigninStatus(isSignedIn){
		if(isSignedIn){
			authorizeButton.style.display = 'none';
			signoutButton.style.display = 'block';
			content.style.display = 'block';
			getChannel(defaultChannel);
		}else{
			authorizeButton.style.display = 'block';
			signoutButton.style.display = 'none';
			content.style.display = 'none';
		}
	}

	// Handle Login
	function handleAuthClick(){
		gapi.auth2.getAuthInstance().signIn();
	}

	// Handle Logout
	function handleSignouClick(){
		gapi.auth2.getAuthInstance().signOut();
	}

	// Display channel Data
	function showChannelData(data){
		const channelData = document.getElementById('channel-data');
		channelData.innerHTML = data;
	}

	// Get channel from API
	function getChannel(channel){
		gapi.client.youtube.channels
		.list({
			part: 'snippet,contentDetails,statistics',
			forUsername: channel
		})
		.then(response => {
			console.log(response);
			const channel = response.result.items[0];
			
			const output = `
				<ul class="collection">
					<li class="collection-item">Title: ${channel.snippet.title}</li>
					<li class="collection-item">ID: ${channel.id}</li>
					<li class="collection-item">Subscribers: ${channel.statistics.subscriberCount}</li>
					<li class="collection-item">Views: ${channel.statistics.viewCount}</li>
					<li class="collection-item">Videos: ${channel.statistics.videoCount}</li>
				</ul>
				<p>${channel.snippet.description}</p>
				<hr />
				<a class="btn red darken-2" target="_blnak" href="https://youtube.com/${channel.snippet.customUrl}">Visit Channel</a>
			`;
			showChannelData(output);
		})
		.catch(err => alert('No Channel By THat Name'));
	}
</script>